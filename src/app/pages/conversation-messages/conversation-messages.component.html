<p-toast></p-toast>
<div class="chat">
  <div class="userInfo">
    @if (this.recipient.name) {
      <span>Talking to <span class="username">{{ recipient.name }}</span></span>
    } @else {
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    }
  </div>
  <div class="chat-messages" #scrollPanel (scroll)="scrollOnTop()">
    @for (message of messages; track $index) {
    <app-messages [message]="message" />
    }
  </div>
  <div #bottomMarker></div>
  <mat-form-field class="chat-input" appearance="outline">
    <input
      matInput
      [(ngModel)]="inputMessage"
      placeholder="Type a message"
      (keyup.enter)="sendMessage()"
    />
    <mat-icon (click)="sendMessage()" matSuffix>send</mat-icon>
  </mat-form-field>
</div>